diff '--exclude=.git' -urN a/src/compositor/compositor.c b/src/compositor/compositor.c
--- a/src/compositor/compositor.c	2019-09-09 13:28:52.000000000 -0500
+++ b/src/compositor/compositor.c	2019-09-29 04:07:23.371750075 -0500
@@ -63,7 +63,6 @@
 #include "clutter/clutter-mutter.h"
 #include "cogl/cogl-trace.h"
 #include "compositor/meta-window-actor-x11.h"
-#include "compositor/meta-window-actor-wayland.h"
 #include "compositor/meta-window-actor-private.h"
 #include "compositor/meta-window-group-private.h"
 #include "core/core.h"
@@ -83,6 +82,7 @@
 #include "x11/meta-x11-display-private.h"
 
 #ifdef HAVE_WAYLAND
+#include "compositor/meta-window-actor-wayland.h"
 #include "wayland/meta-wayland-private.h"
 #endif
 
@@ -594,10 +594,11 @@
     case META_WINDOW_CLIENT_TYPE_X11:
       window_actor_type = META_TYPE_WINDOW_ACTOR_X11;
       break;
-
+    #ifdef HAVE_WAYLAND
     case META_WINDOW_CLIENT_TYPE_WAYLAND:
       window_actor_type = META_TYPE_WINDOW_ACTOR_WAYLAND;
       break;
+    #endif
     }
 
   window_actor = g_object_new (window_actor_type,
diff '--exclude=.git' -urN a/src/meson.build b/src/meson.build
--- a/src/meson.build	2019-09-09 13:28:52.000000000 -0500
+++ b/src/meson.build	2019-09-29 04:13:18.225133782 -0500
@@ -317,8 +317,6 @@
   'compositor/meta-texture-tower.h',
   'compositor/meta-window-actor.c',
   'compositor/meta-window-actor-private.h',
-  'compositor/meta-window-actor-wayland.c',
-  'compositor/meta-window-actor-wayland.h',
   'compositor/meta-window-actor-x11.c',
   'compositor/meta-window-actor-x11.h',
   'compositor/meta-window-group.c',

